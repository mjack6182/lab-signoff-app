services:
  otelcol:
    image: otel/opentelemetry-collector-contrib:latest
    command: ["--config", "/etc/otel/config.yaml"]
    volumes:
      - ./collector/collector-config.yaml/collector-config.yaml:/etc/otel/config.yaml:ro
    ports:
      - "4317:4317"     # OTLP gRPC input
      - "4318:4318"     # OTLP HTTP input
      - "13133:13133"   # Collector health check
    healthcheck:
      test: ["CMD", "wget", "-qO-", "http://localhost:13133/healthz"]
      interval: 10s
      timeout: 5s
      retries: 5
      start_period: 5s
    # networks:
    #   - otel
    restart: unless-stopped

#   jaeger:
#     image: jaegertracing/jaeger:latest
#     environment:
#       COLLECTOR_OTLP_ENABLED: "true"
#     ports:
#       - "16686:16686"   # Jaeger UI
#     networks:
#       - otel
#     depends_on:
#       - otelcol
#     restart: unless-stopped

# networks:
#   otel:
